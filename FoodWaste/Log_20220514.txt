2022-05-14 13:07:51.901 +03:00 [Debug] Hosting starting
2022-05-14 13:07:52.669 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 13:07:52.670 +03:00 [Information] Hosting environment: "Development"
2022-05-14 13:07:52.671 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 13:07:52.671 +03:00 [Debug] Hosting started
2022-05-14 13:07:52.907 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 13:07:53.500 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 13:07:53.501 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 13:07:53.575 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 13:07:53.576 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 13:07:53.683 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:07:53.708 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 13:07:53.821 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 13:07:53.845 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:07:53.869 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 13:07:53.871 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:54.248 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:54.254 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 13:07:54.260 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 13:07:54.264 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:07:54.265 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:54.268 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:54.476 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:07:56.139 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:07:56.146 +03:00 [Debug] Compiling query expression: "
"'"DbSet<UserAllergen>()
    .Where(a => a.UserId == __userId_0)
    .GroupJoin(
        inner: DbSet<Allergen>(), 
        outerKeySelector: a => a.AllergenId, 
        innerKeySelector: al => al.AllergenId, 
        resultSelector: (a, d) => new { 
            a = a, 
            d = d
         })
    .SelectMany(
        collectionSelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.d
            .DefaultIfEmpty(), 
        resultSelector: (<>h__TransparentIdentifier0, al) => al)"'
2022-05-14 13:07:56.206 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM UserAllergens AS u
        LEFT JOIN Allergens AS a ON u.AllergenId == a.AllergenId
        WHERE u.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 13:07:56.211 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:07:56.212 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:07:56.213 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.213 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.215 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:07:56.219 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:07:56.243 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.261 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.261 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.262 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.262 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:07:56.262 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.262 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.263 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 13:07:56.266 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 13:07:56.266 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:07:56.266 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:07:56.266 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.266 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.266 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:07:56.267 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:07:56.267 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.267 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.267 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:07:56.268 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:07:56.268 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.268 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:07:56.287 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:06.583 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:06.584 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()
    .FirstOrDefault(p => p.AllergenId == __allergenId_0)"'
2022-05-14 13:08:06.588 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT TOP(1) a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a
        WHERE a.AllergenId == @__allergenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 13:08:06.588 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:06.589 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:06.589 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.589 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.589 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:06.591 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:06.591 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.591 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:06.591 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.591 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.614 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.617 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:06.619 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:06.629 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:08:06.647 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.649 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.650 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:08:06.654 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:08:06.687 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:06.687 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:06.687 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:06.695 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:06.699 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:06.703 +03:00 [Debug] Committing transaction.
2022-05-14 13:08:06.710 +03:00 [Debug] Committed transaction.
2022-05-14 13:08:06.712 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.712 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.713 +03:00 [Debug] Disposing transaction.
2022-05-14 13:08:06.720 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.721 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:08:06.726 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:06.730 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:06.733 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:06.733 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:06.733 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.733 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.733 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:06.734 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:06.734 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.734 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.734 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.734 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.734 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.735 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:06.735 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.735 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.735 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:06.735 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:06.735 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.735 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.735 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:06.736 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.736 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.737 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:06.737 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:06.737 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.737 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:06.744 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:07.626 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:07.626 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:07.626 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:07.626 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.626 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.626 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:07.627 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:07.627 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.628 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:07.628 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.628 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:07.628 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:07.628 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:08:07.628 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:08:07.629 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:07.629 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:07.629 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:07.631 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:07.631 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:07.631 +03:00 [Debug] Committing transaction.
2022-05-14 13:08:07.636 +03:00 [Debug] Committed transaction.
2022-05-14 13:08:07.636 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.636 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.636 +03:00 [Debug] Disposing transaction.
2022-05-14 13:08:07.637 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.637 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:08:07.638 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:07.642 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:07.642 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:07.642 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:07.642 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.642 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.642 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:07.643 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.643 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.644 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:07.644 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.644 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.644 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:07.644 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:07.644 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.644 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.644 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:07.645 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:07.645 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:07.645 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.645 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:07.648 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:08.356 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:08.356 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.357 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.357 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.357 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.357 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:08.358 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:08.358 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.358 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.358 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.358 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.358 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.358 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:08.358 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:08.358 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:08:08.358 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.358 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.359 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:08:08.359 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:08:08.359 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.359 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.359 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:08.360 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:08.360 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.361 +03:00 [Debug] Committing transaction.
2022-05-14 13:08:08.364 +03:00 [Debug] Committed transaction.
2022-05-14 13:08:08.364 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.364 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.364 +03:00 [Debug] Disposing transaction.
2022-05-14 13:08:08.365 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.365 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:08:08.365 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:08.368 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:08.369 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.369 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.369 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.369 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.369 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:08.370 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:08.370 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.371 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.371 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.371 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.371 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.372 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.372 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.372 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.372 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:08.373 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.373 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.373 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.373 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.375 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:08.914 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:08.914 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.914 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.914 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.914 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.914 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:08.915 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:08.915 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.915 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.915 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.916 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:08.916 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:08.916 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.916 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.916 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:08.918 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:08.918 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.918 +03:00 [Debug] Committing transaction.
2022-05-14 13:08:08.929 +03:00 [Debug] Committed transaction.
2022-05-14 13:08:08.929 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.929 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.929 +03:00 [Debug] Disposing transaction.
2022-05-14 13:08:08.929 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.929 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:08:08.930 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:08.933 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:08.934 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.934 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.934 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.934 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.934 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:08.935 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.935 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.936 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.936 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.936 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:08.936 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:08.936 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.936 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.936 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:08.937 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:08.937 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:08.937 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.937 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:08.939 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:09.451 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:09.451 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:09.451 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:09.451 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.451 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.451 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:09.453 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:08:09.453 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.453 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:09.453 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.453 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:09.453 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:08:09.453 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:08:09.453 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:09.454 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:09.454 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:09.456 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:08:09.456 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:09.456 +03:00 [Debug] Committing transaction.
2022-05-14 13:08:09.459 +03:00 [Debug] Committed transaction.
2022-05-14 13:08:09.459 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.459 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.459 +03:00 [Debug] Disposing transaction.
2022-05-14 13:08:09.460 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.460 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:08:09.460 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:08:09.464 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:08:09.464 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:09.464 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:09.464 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.465 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.465 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:09.466 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:08:09.466 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.467 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:09.467 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.467 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.467 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:08:09.467 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:08:09.467 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.467 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.467 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:09.469 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:08:09.469 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.469 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.469 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.469 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.469 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:08:09.469 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:08:09.469 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.469 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:08:09.471 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:05.084 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:05.090 +03:00 [Debug] Compiling query expression: "
"'"DbSet<UserAllergen>()
    .FirstOrDefault(p => p.AllergenId == __allergenId_0 && p.UserId == __userId_1)"'
2022-05-14 13:09:05.093 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<UserAllergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserAllergen.AllergenId (Guid) Required PK AfterSave:Throw, 0], [Property: UserAllergen.UserId (int) Required PK AfterSave:Throw, 1], }
        SELECT TOP(1) u.AllergenId, u.UserId
        FROM UserAllergens AS u
        WHERE (u.AllergenId == @__allergenId_0) && (u.UserId == @__userId_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserAllergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 13:09:05.093 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:05.093 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:05.093 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.093 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.094 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:05.095 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:05.096 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.096 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:05.096 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.096 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.097 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Unchanged' to 'Deleted'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.098 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:05.098 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:05.098 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:05.098 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.098 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.098 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:05.098 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:05.100 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:05.100 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:05.100 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:05.102 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:05.102 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:05.103 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:05.113 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:05.113 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.113 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.114 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:05.118 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Deleted' to 'Detached'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.118 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:05.119 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:05.123 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:05.123 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:05.123 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:05.124 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.124 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.124 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:05.125 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.125 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:05.125 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.125 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.125 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:05.126 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:05.126 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.126 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.126 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:05.126 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:05.126 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:05.127 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:05.127 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.127 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:05.128 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:15.837 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:15.837 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:15.837 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:15.837 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.837 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.837 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:15.839 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:15.839 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.839 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:15.839 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.839 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:15.839 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:15.839 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:15.839 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:15.840 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:15.840 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:15.840 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:15.842 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:15.842 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:15.842 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:15.859 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:15.859 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.859 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.859 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:15.859 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.859 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:15.860 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:15.864 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:15.864 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:15.864 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:15.864 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.864 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.864 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:15.865 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:15.865 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.865 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.866 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:15.866 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.866 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.866 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:15.866 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:15.866 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.866 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.866 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:15.867 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:15.867 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.867 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.867 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.867 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.867 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:15.867 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:15.867 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.868 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:15.869 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:16.701 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:16.701 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:16.701 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:16.701 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.701 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.701 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:16.703 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:16.703 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.703 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:16.703 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.703 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:16.703 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:16.703 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:16.703 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:16.704 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:16.704 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:16.704 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:16.705 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:16.706 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:16.706 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:16.709 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:16.709 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.709 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.709 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:16.709 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.709 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:16.710 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:16.713 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:16.714 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:16.714 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:16.714 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.714 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.714 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:16.715 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.715 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:16.715 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.715 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.716 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:16.716 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:16.716 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.716 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.716 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:16.716 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:16.717 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.717 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.717 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.717 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:16.717 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:16.717 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.717 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:16.718 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:18.270 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:18.270 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.270 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.270 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.270 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.271 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:18.272 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:18.272 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.272 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.272 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.272 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:18.272 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:18.272 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.272 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.273 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:18.274 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:18.274 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.274 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:18.279 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:18.279 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.279 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.280 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:18.280 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.280 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:18.280 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:18.284 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:18.285 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.285 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.285 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.285 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.285 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:18.286 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.286 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.286 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.286 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.287 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.287 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.287 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.287 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.287 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:18.287 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:18.288 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.288 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.288 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.288 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.288 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.288 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.289 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:18.673 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:18.673 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.673 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.673 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.673 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.673 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:18.675 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:18.675 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.675 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.675 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.675 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.675 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.675 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:18.675 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:18.675 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.676 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.676 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:18.677 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:18.677 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.677 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:18.681 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:18.681 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.681 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.681 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:18.681 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.681 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:18.682 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:18.686 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:18.686 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.686 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.686 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.686 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.686 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:18.687 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.687 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.688 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.688 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.688 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.688 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:18.688 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:18.688 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.688 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.688 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:18.689 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:18.689 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.689 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:18.689 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:18.689 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.689 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:18.690 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:19.127 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:19.127 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.127 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.127 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.127 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.127 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:19.129 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:19.129 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.129 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.129 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.129 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.130 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:19.130 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:19.130 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:19.130 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.130 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.131 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:19.131 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:19.131 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.131 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.131 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:19.133 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:19.134 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.134 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:19.139 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:19.139 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.139 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.139 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:19.139 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.139 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:19.140 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:19.144 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:19.145 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.145 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.145 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.145 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.145 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:19.147 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.148 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.148 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.148 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.148 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.148 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.148 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.148 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.148 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:19.150 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:19.150 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.150 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.150 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.150 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.152 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:19.526 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:19.527 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.527 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.527 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.527 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.527 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:19.528 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 13:09:19.528 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.528 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.528 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.528 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:19.528 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:19.528 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:19.528 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.529 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.529 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:19.531 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"UserAllergens\" (\"AllergenId\", \"UserId\")
VALUES (@p0, @p1);"
2022-05-14 13:09:19.531 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.531 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:19.535 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:19.535 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.535 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.535 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:19.535 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.535 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:19.536 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:19.539 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:19.539 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.539 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.539 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.539 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.539 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:19.541 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.541 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:19.542 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.542 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.542 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.542 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:19.542 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:19.542 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.542 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.542 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:19.543 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:19.543 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:19.543 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.543 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:19.545 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:26.932 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:26.932 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:26.933 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:26.933 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.933 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.933 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:26.934 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:26.934 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.934 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:26.934 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.934 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.934 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Unchanged' to 'Deleted'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.934 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:26.935 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:26.935 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:26.935 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:26.935 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:26.937 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:26.937 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:26.938 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:26.942 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:26.942 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.943 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.943 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:26.943 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Deleted' to 'Detached'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.943 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:26.943 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:26.946 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:26.947 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:26.947 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:26.947 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.947 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.947 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:26.948 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.948 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.949 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.949 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:26.949 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.949 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.949 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:26.949 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:26.949 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.949 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.949 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:26.950 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:26.950 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:26.950 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:26.950 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.950 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:26.951 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:28.150 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:28.150 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:28.150 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:28.151 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.151 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.151 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:28.152 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:28.152 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.152 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:28.152 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.152 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.152 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Unchanged' to 'Deleted'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.152 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:28.152 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:28.152 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:28.152 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.152 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.153 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:28.153 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:28.153 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:28.153 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:28.153 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:28.154 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:28.155 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:28.155 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:28.160 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:28.161 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.161 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.161 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:28.161 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Deleted' to 'Detached'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.161 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:28.161 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:28.164 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:28.165 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:28.165 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:28.165 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.165 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.165 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:28.166 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.166 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.167 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:28.167 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.167 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.167 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:28.167 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:28.167 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.167 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.167 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:28.168 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:28.168 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.168 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:28.168 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:28.168 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.168 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:28.170 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:29.502 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:29.503 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:29.503 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:29.503 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.503 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.503 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:29.504 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid), @__userId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.\"AllergenId\", u.\"UserId\"
FROM \"UserAllergens\" AS u
WHERE (u.\"AllergenId\" = @__allergenId_0) AND (u.\"UserId\" = @__userId_1)
LIMIT 1"
2022-05-14 13:09:29.504 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"UserAllergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.504 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:29.504 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.504 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.505 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Unchanged' to 'Deleted'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.505 +03:00 [Debug] SaveChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:29.505 +03:00 [Debug] DetectChanges starting for '"ApplicationDbContext"'.
2022-05-14 13:09:29.505 +03:00 [Debug] DetectChanges completed for '"ApplicationDbContext"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Beginning transaction with isolation level '"Unspecified"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Began transaction with isolation level '"ReadCommitted"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:29.505 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:29.505 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:29.507 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM \"UserAllergens\"
WHERE \"AllergenId\" = @p0 AND \"UserId\" = @p1;"
2022-05-14 13:09:29.507 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:29.507 +03:00 [Debug] Committing transaction.
2022-05-14 13:09:29.510 +03:00 [Debug] Committed transaction.
2022-05-14 13:09:29.510 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.510 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.510 +03:00 [Debug] Disposing transaction.
2022-05-14 13:09:29.510 +03:00 [Debug] An entity of type '"UserAllergen"' tracked by '"ApplicationDbContext"' changed state from 'Deleted' to 'Detached'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.510 +03:00 [Debug] SaveChanges completed for '"ApplicationDbContext"' with 1 entities written to the database.
2022-05-14 13:09:29.511 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 13:09:29.514 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 13:09:29.514 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:29.514 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:29.514 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.514 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.514 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:29.515 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.516 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:29.516 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.516 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.516 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 13:09:29.516 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 13:09:29.516 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.516 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.516 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:29.517 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 13:09:29.517 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.517 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.517 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 13:09:29.517 +03:00 [Debug] A data reader was disposed.
2022-05-14 13:09:29.517 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.517 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 13:09:29.519 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:03:56.275 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:03:56.283 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUser<int>>()
    .FirstOrDefault(e => EF.Property<int>(e, \"Id\") == __p_0)"'
2022-05-14 14:03:56.297 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUser<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUser<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUser<int>.AccessFailedCount (int) Required, 1], [Property: IdentityUser<int>.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser<int>.Discriminator (no field, string) Shadow Required AfterSave:Throw, 3], [Property: IdentityUser<int>.Email (string) MaxLength(256), 4], [Property: IdentityUser<int>.EmailConfirmed (bool) Required, 5], [Property: IdentityUser<int>.LockoutEnabled (bool) Required, 6], [Property: IdentityUser<int>.LockoutEnd (Nullable<DateTimeOffset>), 7], [Property: IdentityUser<int>.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser<int>.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser<int>.PasswordHash (string), 10], [Property: IdentityUser<int>.PhoneNumber (string), 11], [Property: IdentityUser<int>.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser<int>.SecurityStamp (string), 13], [Property: IdentityUser<int>.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser<int>.UserName (string) MaxLength(256), 15], }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.Id == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUser<int>>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:03:56.303 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:56.303 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:56.303 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.349 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.349 +03:00 [Debug] Executing DbCommand [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 14:03:56.351 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 14:03:56.370 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"IdentityUser<int>"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:56.396 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:56.396 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.396 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.408 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUserClaim<int>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())"'
2022-05-14 14:03:56.432 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:03:56.432 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:56.432 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:56.432 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.432 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.432 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 14:03:56.441 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 14:03:56.442 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:56.442 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.442 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.460 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .Select(r => r)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)"'
2022-05-14 14:03:56.465 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE (@__SearchString_0 == '') || (strpos(r.Name, @__SearchString_0) > 0)
        ORDER BY r.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:03:56.466 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:56.466 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:56.466 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.466 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.466 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.469 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.473 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:56.478 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:56.479 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:56.479 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.479 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.479 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:56.479 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:56.479 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.479 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.479 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.481 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.481 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:56.481 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.481 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.483 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:56.483 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:56.483 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.483 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.483 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.484 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:56.490 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:56.491 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:56.492 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:56.492 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.492 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:56.507 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:03:58.260 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:03:58.260 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .FirstOrDefault(m => m.UserId == __id_0)"'
2022-05-14 14:03:58.263 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(1) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:03:58.268 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:58.268 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:58.268 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:58.268 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:58.268 +03:00 [Debug] Executing DbCommand [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__id_0
LIMIT 1"
2022-05-14 14:03:58.270 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__id_0
LIMIT 1"
2022-05-14 14:03:58.270 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:58.270 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:58.271 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:58.271 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:58.280 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:03:59.134 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:03:59.134 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:59.134 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:59.134 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.134 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.134 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.135 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.135 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:59.136 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:59.136 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:59.136 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.136 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.136 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:59.136 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:59.136 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.136 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.136 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.137 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.137 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:59.137 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.137 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.137 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:03:59.137 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:03:59.137 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.138 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.138 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.138 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:03:59.140 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:59.140 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:03:59.141 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:03:59.141 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.141 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:03:59.142 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:00.386 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:00.386 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .FirstOrDefault(p => (Nullable<int>)p.Id == __id_0)"'
2022-05-14 14:04:00.388 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(1) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.Id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:04:00.388 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:00.389 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:00.389 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:00.389 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:00.389 +03:00 [Debug] Executing DbCommand [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"Id\" = @__id_0
LIMIT 1"
2022-05-14 14:04:00.390 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"Id\" = @__id_0
LIMIT 1"
2022-05-14 14:04:00.391 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:00.391 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:00.391 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:00.391 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:00.419 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:03.035 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:03.036 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:03.036 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:03.036 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.036 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.036 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.038 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.038 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:03.038 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:03.038 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:03.038 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.038 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.038 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:03.038 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:03.038 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.038 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.039 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.040 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.040 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:03.040 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.040 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.040 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:03.040 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:03.040 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.040 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.040 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.041 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 14:04:03.042 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:03.043 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:03.044 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:03.044 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.044 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:03.045 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:09.585 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:09.585 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:09.585 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:09.585 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:09.585 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:09.585 +03:00 [Debug] Executing DbCommand [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"Id\" = @__id_0
LIMIT 1"
2022-05-14 14:04:09.587 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"Id\" = @__id_0
LIMIT 1"
2022-05-14 14:04:09.587 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:09.588 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:09.588 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:09.588 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:09.591 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:15.632 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:04:15.634 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:15.635 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:04:15.637 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:04:15.637 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:15.637 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:15.637 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.637 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.637 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.639 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.639 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.639 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:15.639 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.639 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.640 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:15.640 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:15.640 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.640 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.640 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.641 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.641 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:15.641 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.642 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.642 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:15.642 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:15.642 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.642 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.642 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.643 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:15.643 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:15.643 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.643 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.644 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:04:15.645 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:04:15.645 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:15.646 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:15.646 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.646 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.646 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:04:15.647 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:04:15.647 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:15.647 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.647 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.647 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:04:15.665 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:04:15.668 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:04:15.668 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:15.668 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:15.668 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.668 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.668 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:04:15.669 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:04:15.674 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.706 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.707 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.708 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.708 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:15.709 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:15.709 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.709 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:15.713 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:17.752 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Edit (FoodWaste)"
2022-05-14 14:04:17.753 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:17.754 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, \"Id\"), 
        objB: (object)__get_Item_0))"'
2022-05-14 14:04:17.756 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Product>(
    asyncEnumerable: new SingleQueryingEnumerable<Product>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
            SELECT TOP(1) p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
            FROM Product AS p
            WHERE p.Id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:04:17.757 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:17.757 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:17.757 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:17.757 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:17.757 +03:00 [Debug] Executing DbCommand [Parameters=["@__get_Item_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE p.\"Id\" = @__get_Item_0
LIMIT 1"
2022-05-14 14:04:17.759 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__get_Item_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE p.\"Id\" = @__get_Item_0
LIMIT 1"
2022-05-14 14:04:17.759 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:17.759 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:17.759 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:17.759 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:17.846 +03:00 [Information] Completed: opening product editing page "{\"Id\":\"983f992a-0fd9-4545-801b-0ecf6b890ae2\",\"Name\":\"aaa\",\"ExpiryDate\":\"2022-05-13T15:19:00\",\"State\":3,\"RestaurantId\":4,\"Restaurants\":null,\"UserId\":null,\"ApplicationUser\":null,\"ProductAllergens\":null}"
2022-05-14 14:04:17.846 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Edit (FoodWaste)"
2022-05-14 14:04:17.878 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:04:18.549 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:04:18.549 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:04:18.549 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:18.549 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:18.549 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.549 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.549 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.551 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.551 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.551 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:18.551 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.551 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.551 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:18.551 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:18.551 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.551 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.551 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.552 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.552 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:18.552 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.552 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.553 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:18.553 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:18.553 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.553 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.553 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.554 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:04:18.554 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:18.554 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.554 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.554 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:18.554 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:18.554 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.554 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.554 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:04:18.555 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:04:18.555 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:18.555 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.555 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.555 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:04:18.556 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:04:18.556 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:04:18.556 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.556 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.556 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:04:18.557 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:04:18.557 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.558 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.559 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.559 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.560 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:04:18.561 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:04:18.561 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.561 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:04:18.562 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:13:43.894 +03:00 [Debug] Hosting starting
2022-05-14 14:13:44.636 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:13:44.636 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:13:44.637 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:13:44.637 +03:00 [Debug] Hosting started
2022-05-14 14:13:44.860 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:13:45.479 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:13:45.480 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:13:45.483 +03:00 [Warning] There are multiple relationships between '"Allergen"' and '"Product"' without configured foreign key properties. This will cause Entity Framework to create shadow properties on '"Allergen"' with names dependent on the discovery order.
2022-05-14 14:13:45.552 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:13:45.552 +03:00 [Debug] The property '"ProductId1"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:13:45.552 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:13:45.664 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:13:45.689 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:13:45.808 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:13:45.840 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:45.864 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 14:13:45.867 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:46.246 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:46.252 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:13:46.259 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:13:46.262 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:46.264 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:46.267 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:46.491 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:13:50.047 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:13:50.070 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:13:50.075 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:13:50.150 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:13:50.164 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:50.165 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:50.166 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.167 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.169 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.175 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.195 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.216 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:50.216 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.216 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.218 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:50.218 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:50.218 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.218 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.219 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.220 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.220 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:50.220 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.221 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.221 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:50.221 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:50.221 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.221 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.221 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.222 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:13:50.222 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:50.223 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.223 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.224 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:13:50.228 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:13:50.230 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:50.230 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:50.230 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.230 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.230 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:13:50.233 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:13:50.233 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:50.233 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.233 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.234 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:13:50.256 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:13:50.260 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:13:50.261 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:50.261 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:50.261 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.261 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.261 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:13:50.263 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:13:50.280 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.322 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.324 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.326 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.327 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:50.329 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:50.329 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.329 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:50.336 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:13:51.555 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:13:54.263 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:13:54.267 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:13:54.271 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:13:54.281 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:13:54.281 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:13:54.284 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:54.285 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:54.285 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:13:54.296 +03:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:13:54.299 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:13:54.363 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:13:54.365 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:54.366 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:13:58.452 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:17:03.945 +03:00 [Debug] Hosting starting
2022-05-14 14:17:04.685 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:17:04.686 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:17:04.686 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:17:04.687 +03:00 [Debug] Hosting started
2022-05-14 14:17:04.913 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:17:05.570 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:17:05.570 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:17:05.573 +03:00 [Warning] There are multiple relationships between '"Allergen"' and '"Product"' without configured foreign key properties. This will cause Entity Framework to create shadow properties on '"Allergen"' with names dependent on the discovery order.
2022-05-14 14:17:05.663 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:05.663 +03:00 [Debug] The property '"ProductId1"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:05.663 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:05.775 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:17:05.808 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:17:05.943 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:17:05.967 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:05.991 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 14:17:05.994 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:06.401 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:06.408 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:17:06.416 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:17:06.419 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:06.421 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:06.424 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:06.652 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:17:10.081 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:17:10.109 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:17:10.113 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:17:10.187 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:17:10.200 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:10.200 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:10.201 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.201 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.203 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.207 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.225 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.246 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:10.246 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.246 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.248 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:10.248 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:10.248 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.248 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.248 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.249 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.250 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:10.250 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.250 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.250 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:10.250 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:10.250 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.250 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.250 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.251 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:17:10.251 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:10.251 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.252 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.253 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:17:10.258 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:17:10.259 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:10.259 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:10.259 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.259 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.259 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:17:10.262 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:17:10.262 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:10.262 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.262 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.263 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:17:10.284 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:17:10.290 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:17:10.290 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:10.290 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:10.290 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.291 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.291 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:17:10.292 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:17:10.310 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.355 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.356 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.357 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.359 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:10.361 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:10.361 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.361 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:10.368 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:17:11.322 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:17:13.184 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:17:13.187 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:17:13.193 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:17:13.207 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:13.207 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:13.209 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.210 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.210 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:17:13.221 +03:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:17:13.240 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:17:13.244 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:13.246 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.247 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.248 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:17:13.252 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], [Property: Allergen.ProductId1 (no field, Nullable<Guid>) Shadow FK Index, 4], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId, a.ProductId1
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:17:13.252 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:13.252 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:17:13.252 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.252 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.253 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:17:13.264 +03:00 [Error] Failed executing DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:17:13.264 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.264 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:13.307 +03:00 [Error] An exception occurred while iterating over the results of a query for context type '"FoodWaste.Data.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column \"a.ProductId\".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn"
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:17:13.353 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:17:13.360 +03:00 [Error] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at FoodWaste.Controllers.ProductsController.GetAllergens(IEnumerable`1 productAllergens) in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 393
   at FoodWaste.Controllers.ProductsController.Create() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 176
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:17:13.424 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:17:39.929 +03:00 [Debug] Hosting starting
2022-05-14 14:17:41.382 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:17:41.383 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:17:41.384 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:17:41.384 +03:00 [Debug] Hosting started
2022-05-14 14:17:41.687 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:17:42.633 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:17:42.634 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:17:42.639 +03:00 [Warning] There are multiple relationships between '"Allergen"' and '"Product"' without configured foreign key properties. This will cause Entity Framework to create shadow properties on '"Allergen"' with names dependent on the discovery order.
2022-05-14 14:17:42.731 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:42.731 +03:00 [Debug] The property '"ProductId1"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:42.731 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:17:42.958 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:17:42.994 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:17:43.164 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:17:43.195 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:17:43.224 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (27ms).
2022-05-14 14:17:43.227 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:43.746 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:43.754 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:17:43.762 +03:00 [Information] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:17:43.766 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:17:43.768 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:43.772 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:17:44.029 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:18:39.975 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:18:39.984 +03:00 [Debug] Compiling query expression: "
"'"DbSet<UserAllergen>()
    .Where(a => a.UserId == __userId_0)
    .GroupJoin(
        inner: DbSet<Allergen>(), 
        outerKeySelector: a => a.AllergenId, 
        innerKeySelector: al => al.AllergenId, 
        resultSelector: (a, d) => new { 
            a = a, 
            d = d
         })
    .SelectMany(
        collectionSelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.d
            .DefaultIfEmpty(), 
        resultSelector: (<>h__TransparentIdentifier0, al) => al)"'
2022-05-14 14:18:40.048 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], [Property: Allergen.ProductId1 (no field, Nullable<Guid>) Shadow FK Index, 4], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId, a.ProductId1
        FROM UserAllergens AS u
        LEFT JOIN Allergens AS a ON u.AllergenId == a.AllergenId
        WHERE u.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:18:40.053 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:40.053 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:40.055 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:40.055 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:40.056 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 14:18:40.067 +03:00 [Error] Failed executing DbCommand ("11"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 14:18:40.067 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:40.067 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:40.104 +03:00 [Error] An exception occurred while iterating over the results of a query for context type '"FoodWaste.Data.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column \"a.ProductId\".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn"
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:18:40.197 +03:00 [Error] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at FoodWaste.Controllers.UserAllergensController.GetUserAllergens() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\UserAllergensController.cs:line 49
   at FoodWaste.Controllers.UserAllergensController.Index() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\UserAllergensController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:18:40.253 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:18:42.966 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:18:42.969 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:42.969 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:42.969 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:42.970 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:42.970 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:18:42.971 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:18:42.971 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:42.971 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:42.971 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:42.993 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:18:46.129 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:18:46.131 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:18:46.133 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:18:46.160 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:18:46.164 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:46.164 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:46.164 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.164 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.164 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.166 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.185 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.205 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:46.205 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.205 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.205 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:46.205 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:46.206 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.206 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.206 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.207 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.207 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:46.207 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.207 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.207 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:46.207 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:46.208 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.208 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.208 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.209 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:18:46.209 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:46.209 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.209 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.210 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:18:46.214 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:18:46.215 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:46.215 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:46.215 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.215 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.215 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:18:46.218 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:18:46.218 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:46.219 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.219 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.219 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:18:46.238 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:18:46.242 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:18:46.243 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:46.243 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:46.243 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.243 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.243 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:18:46.244 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:18:46.259 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.298 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.300 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.302 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.303 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:46.303 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:46.303 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.304 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:46.308 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:18:47.320 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:18:49.740 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:18:49.742 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:18:49.745 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:18:49.754 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:49.754 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:49.756 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:49.757 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:49.758 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:18:49.767 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:18:49.770 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:18:49.810 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:18:49.813 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:49.814 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:50.459 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:18:50.462 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], [Property: Allergen.ProductId1 (no field, Nullable<Guid>) Shadow FK Index, 4], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId, a.ProductId1
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:18:50.462 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:18:50.462 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:18:50.462 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:50.462 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:50.462 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:18:50.465 +03:00 [Error] Failed executing DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:18:50.465 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:50.465 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:18:50.466 +03:00 [Error] An exception occurred while iterating over the results of a query for context type '"FoodWaste.Data.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column \"a.ProductId\".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn"
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:18:50.524 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:18:50.529 +03:00 [Error] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at FoodWaste.Controllers.ProductsController.GetAllergens(IEnumerable`1 productAllergens) in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 393
   at FoodWaste.Controllers.ProductsController.Create() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 176
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:18:50.566 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:19:22.978 +03:00 [Debug] Hosting starting
2022-05-14 14:19:23.809 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:19:23.810 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:19:23.811 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:19:23.811 +03:00 [Debug] Hosting started
2022-05-14 14:19:24.024 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:19:24.659 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:19:24.659 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:19:24.662 +03:00 [Warning] There are multiple relationships between '"Allergen"' and '"Product"' without configured foreign key properties. This will cause Entity Framework to create shadow properties on '"Allergen"' with names dependent on the discovery order.
2022-05-14 14:19:24.742 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:19:24.743 +03:00 [Debug] The property '"ProductId1"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:19:24.743 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:19:24.865 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:19:24.894 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:19:25.016 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:19:25.045 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:25.069 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 14:19:25.072 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:25.464 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:25.471 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:19:25.478 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:19:25.481 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:25.483 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:25.486 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:25.700 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:19:52.524 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:19:52.549 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:19:52.554 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:19:52.618 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:19:52.627 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:52.627 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:52.629 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.629 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.630 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.634 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.653 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.677 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:52.677 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.677 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.679 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:52.680 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:52.680 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.680 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.680 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.681 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.681 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:52.682 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.682 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.682 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:52.682 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:52.682 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.682 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.682 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.684 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:19:52.684 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:52.684 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.684 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.685 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:19:52.691 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:19:52.692 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:52.692 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:52.692 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.692 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.692 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:19:52.695 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:19:52.695 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:52.695 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.696 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.696 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:19:52.727 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:19:52.731 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:19:52.732 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:52.732 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:52.732 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.732 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.732 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:19:52.734 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:19:52.750 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.790 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.792 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.793 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.794 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:52.795 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:52.795 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.795 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:52.808 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:19:53.731 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:19:56.244 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:19:56.247 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:19:56.250 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:19:56.259 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:19:56.259 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:19:56.261 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:56.262 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:56.262 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:19:56.266 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:19:56.266 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:19:56.268 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:19:56.269 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:19:56.270 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:20:02.559 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:20:02.562 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], [Property: Allergen.ProductId1 (no field, Nullable<Guid>) Shadow FK Index, 4], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId, a.ProductId1
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:20:02.562 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:20:02.562 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:20:02.562 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:20:02.562 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:20:02.562 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:20:02.571 +03:00 [Error] Failed executing DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\", a.\"ProductId1\"
FROM \"Allergens\" AS a"
2022-05-14 14:20:02.571 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:20:02.571 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:20:02.612 +03:00 [Error] An exception occurred while iterating over the results of a query for context type '"FoodWaste.Data.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column \"a.ProductId\".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn"
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:20:04.609 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:20:05.113 +03:00 [Error] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42703: column a.ProductId1 does not exist
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at FoodWaste.Controllers.ProductsController.GetAllergens(IEnumerable`1 productAllergens) in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 393
   at FoodWaste.Controllers.ProductsController.Create() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 176
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.ProductId1 does not exist
    Hint: Perhaps you meant to reference the column "a.ProductId".
    Position: 62
    File: parse_relation.c
    Line: 3589
    Routine: errorMissingColumn
2022-05-14 14:20:05.170 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:44:50.861 +03:00 [Debug] Hosting starting
2022-05-14 14:44:51.674 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:44:51.674 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:44:51.675 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:44:51.675 +03:00 [Debug] Hosting started
2022-05-14 14:44:51.910 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:44:52.492 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:44:52.493 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:44:52.568 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:44:52.568 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:44:52.685 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:44:52.750 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUser<int>>()
    .FirstOrDefault(e => EF.Property<int>(e, \"Id\") == __p_0)"'
2022-05-14 14:44:52.892 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUser<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUser<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUser<int>.AccessFailedCount (int) Required, 1], [Property: IdentityUser<int>.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser<int>.Discriminator (no field, string) Shadow Required AfterSave:Throw, 3], [Property: IdentityUser<int>.Email (string) MaxLength(256), 4], [Property: IdentityUser<int>.EmailConfirmed (bool) Required, 5], [Property: IdentityUser<int>.LockoutEnabled (bool) Required, 6], [Property: IdentityUser<int>.LockoutEnd (Nullable<DateTimeOffset>), 7], [Property: IdentityUser<int>.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser<int>.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser<int>.PasswordHash (string), 10], [Property: IdentityUser<int>.PhoneNumber (string), 11], [Property: IdentityUser<int>.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser<int>.SecurityStamp (string), 13], [Property: IdentityUser<int>.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser<int>.UserName (string) MaxLength(256), 15], }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.Id == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUser<int>>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:44:52.923 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:52.950 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (25ms).
2022-05-14 14:44:52.955 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.385 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.393 +03:00 [Debug] Executing DbCommand [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 14:44:53.406 +03:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 14:44:53.452 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"IdentityUser<int>"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:53.489 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:53.491 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.494 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.507 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUserClaim<int>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())"'
2022-05-14 14:44:53.535 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:44:53.536 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:53.536 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:53.536 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.536 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.536 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 14:44:53.544 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 14:44:53.545 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:53.545 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.545 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.584 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:44:53.594 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:44:53.598 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:53.598 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:53.599 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.599 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.599 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:44:53.602 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:44:53.602 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:53.603 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.603 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:53.850 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:44:55.208 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:44:55.231 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:44:55.232 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:44:55.236 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:44:55.241 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:55.241 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:55.241 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.241 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.241 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.243 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.247 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.253 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:55.253 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.253 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.255 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:55.255 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:55.255 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.255 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.255 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.257 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.258 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:55.258 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.258 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.258 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:55.258 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:55.258 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.258 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.258 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.260 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:44:55.260 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:55.260 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.260 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.261 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:44:55.267 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:44:55.268 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:55.268 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:55.268 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.268 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.268 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:44:55.271 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:44:55.271 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:55.271 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.271 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.272 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:44:55.292 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:44:55.297 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:44:55.297 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:55.297 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:55.298 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.298 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.298 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:44:55.299 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:44:55.314 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.354 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.356 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.358 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.359 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:55.360 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:55.360 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.360 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:55.372 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:44:56.530 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:44:59.299 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:44:59.300 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:44:59.303 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:44:59.303 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:44:59.303 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:44:59.303 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:59.304 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:59.304 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:44:59.305 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:44:59.321 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:44:59.322 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:44:59.322 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:44:59.322 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:01.550 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:45:01.555 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:45:01.556 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:45:01.556 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:45:01.556 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:01.556 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:01.556 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:45:01.557 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:45:01.561 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.569 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:01.570 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:45:01.570 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:01.570 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:01.572 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:45:01.802 +03:00 [Error] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Linq.OrderedEnumerable`2[FoodWaste.Models.Allergen,System.String]' to type 'System.Collections.Generic.List`1[FoodWaste.Models.Allergen]'.
   at AspNetCore.Views_Products_Create.<>c__DisplayClass18_0.<<ExecuteAsync>b__4>d.MoveNext() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml:line 88
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCore.Views_Products_Create.ExecuteAsync() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml:line 6
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-05-14 14:45:01.886 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:45:27.035 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:45:29.017 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:45:29.017 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:45:29.017 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:45:29.017 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:29.017 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:29.018 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:45:29.019 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:45:29.020 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:29.020 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:45:29.020 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:29.020 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:33.457 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:45:33.457 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:45:33.457 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:33.457 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:33.458 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:45:33.459 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.479 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.480 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.480 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.480 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:45:33.480 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:45:33.480 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:33.480 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:45:50.352 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:45:55.199 +03:00 [Error] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Linq.OrderedEnumerable`2[FoodWaste.Models.Allergen,System.String]' to type 'System.Collections.Generic.List`1[FoodWaste.Models.Allergen]'.
   at AspNetCore.Views_Products_Create.<>c__DisplayClass18_0.<<ExecuteAsync>b__4>d.MoveNext() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml:line 88
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCore.Views_Products_Create.ExecuteAsync() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml:line 6
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-05-14 14:45:55.205 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:47:19.942 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:47:21.321 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:47:21.338 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:47:21.338 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:47:21.338 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:21.338 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:21.338 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:47:21.342 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:47:21.349 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:21.349 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:47:21.349 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:21.350 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:22.034 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:47:22.034 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:47:22.034 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:22.034 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:22.035 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:47:22.036 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:47:22.036 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.036 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.036 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.036 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:47:22.037 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:47:22.037 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:22.037 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:47:22.037 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:47:24.731 +03:00 [Error] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation.CompilationFailedException: One or more compilation failures occurred:
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(5,44): error CS8124: Tuple must contain at least two elements.
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(5,45): error CS1526: A new expression requires (), [], or {} after type
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(6,43): error CS8124: Tuple must contain at least two elements.
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(6,44): error CS1526: A new expression requires (), [], or {} after type
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(5,43): error CS8181: 'new' cannot be used with tuple type. Use a tuple literal expression instead.
C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Views\Products\Create.cshtml(6,42): error CS8181: 'new' cannot be used with tuple type. Use a tuple literal expression instead.
   at Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation.RuntimeViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation.RuntimeViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation.RuntimeViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Razor.Compilation.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-05-14 14:47:24.736 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:48:03.342 +03:00 [Debug] Hosting starting
2022-05-14 14:48:04.090 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:48:04.091 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:48:04.092 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:48:04.092 +03:00 [Debug] Hosting started
2022-05-14 14:48:04.307 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:48:04.911 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:48:04.911 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:48:04.980 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:48:04.980 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:48:05.092 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:48:05.115 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:48:05.231 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:48:05.254 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:05.279 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (24ms).
2022-05-14 14:48:05.282 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:05.661 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:05.667 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:48:05.674 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:48:05.678 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:05.680 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:05.682 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:05.917 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:48:07.843 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:48:07.851 +03:00 [Debug] Compiling query expression: "
"'"DbSet<UserAllergen>()
    .Where(a => a.UserId == __userId_0)
    .GroupJoin(
        inner: DbSet<Allergen>(), 
        outerKeySelector: a => a.AllergenId, 
        innerKeySelector: al => al.AllergenId, 
        resultSelector: (a, d) => new { 
            a = a, 
            d = d
         })
    .SelectMany(
        collectionSelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.d
            .DefaultIfEmpty(), 
        resultSelector: (<>h__TransparentIdentifier0, al) => al)"'
2022-05-14 14:48:07.920 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM UserAllergens AS u
        LEFT JOIN Allergens AS a ON u.AllergenId == a.AllergenId
        WHERE u.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:48:07.927 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:07.927 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:07.928 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.929 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.930 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 14:48:07.934 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 14:48:07.958 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.975 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.975 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.976 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.977 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.977 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:07.977 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.977 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.977 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:48:07.979 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:48:07.980 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:07.980 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:07.980 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.980 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.980 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:48:07.981 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:48:07.981 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.981 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.981 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:07.981 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:07.981 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:07.982 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:08.000 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:48:11.135 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:48:11.142 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:48:11.144 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:48:11.169 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:48:11.173 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:11.173 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:11.173 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.173 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.173 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.175 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.183 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.191 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:11.191 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.191 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.193 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:11.194 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:11.194 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.194 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.194 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.195 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.195 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:11.195 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.195 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.195 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:11.196 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:11.196 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.196 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.196 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.197 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:48:11.197 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:11.197 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.197 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.198 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:48:11.202 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:48:11.203 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:11.203 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:11.203 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.203 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.203 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:48:11.206 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:48:11.206 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:11.206 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.206 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.207 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:48:11.219 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:48:11.224 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:48:11.225 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:11.225 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:11.225 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.225 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.225 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:48:11.227 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:48:11.230 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.268 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.269 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.269 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.270 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:11.271 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:11.271 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.271 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:11.277 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:48:12.522 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:48:21.772 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:48:21.774 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:48:21.777 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:48:21.786 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:21.786 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:21.788 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.789 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.789 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:48:21.798 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:48:21.801 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.804 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:21.806 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.806 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.807 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:48:21.807 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:48:21.807 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.807 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.807 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:48:21.808 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:48:21.808 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.808 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.808 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.808 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:48:21.809 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:48:21.809 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.809 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:48:21.811 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:48:21.845 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:57:19.454 +03:00 [Debug] Hosting starting
2022-05-14 14:57:20.170 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 14:57:20.171 +03:00 [Information] Hosting environment: "Development"
2022-05-14 14:57:20.171 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 14:57:20.171 +03:00 [Debug] Hosting started
2022-05-14 14:57:20.400 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 14:57:20.991 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 14:57:20.992 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 14:57:21.065 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:57:21.065 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 14:57:21.171 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:57:21.197 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 14:57:21.312 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:57:21.336 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:21.359 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (22ms).
2022-05-14 14:57:21.361 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:21.734 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:21.740 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:57:21.747 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 14:57:21.750 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:21.752 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:21.754 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:21.965 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:57:23.904 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:57:23.929 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:57:23.933 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 14:57:23.997 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 14:57:24.005 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:24.005 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:24.006 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.006 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.007 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.012 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.031 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.051 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:24.051 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.051 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.053 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:24.053 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:24.053 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.053 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.054 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.055 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.055 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:24.055 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.055 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.055 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:24.056 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:24.056 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.056 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.056 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.057 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 14:57:24.057 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:24.057 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.057 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.058 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 14:57:24.063 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 14:57:24.065 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:24.065 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:24.065 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.065 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.065 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:57:24.068 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 14:57:24.068 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:24.068 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.068 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.069 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 14:57:24.086 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 14:57:24.089 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:57:24.090 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:24.090 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:24.090 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.090 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.090 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:57:24.092 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 14:57:24.106 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.146 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.147 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.149 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.150 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:24.150 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:24.150 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.151 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:24.164 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 14:57:25.066 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:57:25.073 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 14:57:25.075 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 14:57:25.079 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 14:57:25.087 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:25.087 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:25.089 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.090 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.090 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:57:25.099 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 14:57:25.102 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.110 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:25.112 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.113 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.114 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 14:57:25.116 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 14:57:25.117 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 14:57:25.117 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 14:57:25.117 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.117 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.117 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:57:25.118 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 14:57:25.124 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.130 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.131 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.131 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 14:57:25.131 +03:00 [Debug] A data reader was disposed.
2022-05-14 14:57:25.131 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.131 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 14:57:25.132 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 14:57:25.172 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:10.754 +03:00 [Debug] Hosting starting
2022-05-14 18:49:11.473 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 18:49:11.473 +03:00 [Information] Hosting environment: "Development"
2022-05-14 18:49:11.474 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 18:49:11.474 +03:00 [Debug] Hosting started
2022-05-14 18:49:11.684 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 18:49:12.228 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 18:49:12.228 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 18:49:12.310 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 18:49:12.310 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 18:49:12.421 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:12.484 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUser<int>>()
    .FirstOrDefault(e => EF.Property<int>(e, \"Id\") == __p_0)"'
2022-05-14 18:49:12.616 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUser<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUser<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUser<int>.AccessFailedCount (int) Required, 1], [Property: IdentityUser<int>.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser<int>.Discriminator (no field, string) Shadow Required AfterSave:Throw, 3], [Property: IdentityUser<int>.Email (string) MaxLength(256), 4], [Property: IdentityUser<int>.EmailConfirmed (bool) Required, 5], [Property: IdentityUser<int>.LockoutEnabled (bool) Required, 6], [Property: IdentityUser<int>.LockoutEnd (Nullable<DateTimeOffset>), 7], [Property: IdentityUser<int>.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser<int>.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser<int>.PasswordHash (string), 10], [Property: IdentityUser<int>.PhoneNumber (string), 11], [Property: IdentityUser<int>.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser<int>.SecurityStamp (string), 13], [Property: IdentityUser<int>.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser<int>.UserName (string) MaxLength(256), 15], }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.Id == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUser<int>>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 18:49:12.647 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:12.671 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 18:49:12.677 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.080 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.088 +03:00 [Debug] Executing DbCommand [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 18:49:13.101 +03:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"AccessFailedCount\", a.\"ConcurrencyStamp\", a.\"Discriminator\", a.\"Email\", a.\"EmailConfirmed\", a.\"LockoutEnabled\", a.\"LockoutEnd\", a.\"NormalizedEmail\", a.\"NormalizedUserName\", a.\"PasswordHash\", a.\"PhoneNumber\", a.\"PhoneNumberConfirmed\", a.\"SecurityStamp\", a.\"TwoFactorEnabled\", a.\"UserName\"
FROM \"AspNetUsers\" AS a
WHERE a.\"Id\" = @__p_0
LIMIT 1"
2022-05-14 18:49:13.138 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"IdentityUser<int>"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:13.175 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:13.178 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.181 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.193 +03:00 [Debug] Compiling query expression: "
"'"DbSet<IdentityUserClaim<int>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())"'
2022-05-14 18:49:13.225 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:49:13.225 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:13.225 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:13.225 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.225 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.225 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 18:49:13.233 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__user_Id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"Id\", a.\"ClaimType\", a.\"ClaimValue\", a.\"UserId\"
FROM \"AspNetUserClaims\" AS a
WHERE a.\"UserId\" = @__user_Id_0"
2022-05-14 18:49:13.234 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:13.234 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.234 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.270 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 18:49:13.278 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 18:49:13.283 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:13.283 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:13.284 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.284 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.285 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 18:49:13.287 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 18:49:13.288 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:13.288 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.288 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:13.496 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:15.795 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:15.798 +03:00 [Debug] Compiling query expression: "
"'"DbSet<UserAllergen>()
    .Where(a => a.UserId == __userId_0)
    .GroupJoin(
        inner: DbSet<Allergen>(), 
        outerKeySelector: a => a.AllergenId, 
        innerKeySelector: al => al.AllergenId, 
        resultSelector: (a, d) => new { 
            a = a, 
            d = d
         })
    .SelectMany(
        collectionSelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.d
            .DefaultIfEmpty(), 
        resultSelector: (<>h__TransparentIdentifier0, al) => al)"'
2022-05-14 18:49:15.819 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM UserAllergens AS u
        LEFT JOIN Allergens AS a ON u.AllergenId == a.AllergenId
        WHERE u.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:49:15.822 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:15.822 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:15.822 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.822 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.822 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 18:49:15.824 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"UserAllergens\" AS u
LEFT JOIN \"Allergens\" AS a ON u.\"AllergenId\" = a.\"AllergenId\"
WHERE u.\"UserId\" = @__userId_0"
2022-05-14 18:49:15.834 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.842 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.842 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.843 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:15.843 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.843 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.844 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 18:49:15.846 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:49:15.846 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:15.847 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:15.847 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.847 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.847 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:49:15.848 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:49:15.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.849 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.849 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:15.849 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:15.849 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.849 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:15.871 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:17.094 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:49:17.103 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:17.105 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 18:49:17.110 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 18:49:17.114 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:17.114 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:17.114 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.114 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.114 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.116 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.120 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.124 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:17.124 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.124 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.126 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:17.126 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:17.126 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.126 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.126 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.128 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.128 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:17.128 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.128 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.128 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:17.128 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:17.128 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.129 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.129 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.130 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:17.130 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:17.130 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.130 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.132 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 18:49:17.136 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 18:49:17.137 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:17.137 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:17.137 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.137 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.137 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:49:17.140 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:49:17.140 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:17.140 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.140 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.141 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:49:17.154 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 18:49:17.157 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:49:17.158 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:17.158 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:17.158 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.158 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.158 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:49:17.160 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:49:17.164 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.198 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.200 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.201 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.201 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:17.202 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:17.202 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.202 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:17.207 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:18.776 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:18.786 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .Select(r => r)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)"'
2022-05-14 18:49:18.788 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE (@__SearchString_0 == '') || (strpos(r.Name, @__SearchString_0) > 0)
        ORDER BY r.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:49:18.789 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:18.789 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:18.789 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.789 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.789 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.790 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.790 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:18.791 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:18.792 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:18.792 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.792 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.792 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:18.792 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:18.792 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.792 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.792 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.794 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.794 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:18.794 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.794 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.796 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:18.796 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:18.796 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.796 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.796 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.797 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE (@__SearchString_0 = '') OR (strpos(r.\"Name\", @__SearchString_0) > 0)
ORDER BY r.\"Name\""
2022-05-14 18:49:18.801 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:18.802 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:18.803 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:18.803 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.803 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:18.805 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:19.379 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:49:19.379 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:19.380 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:19.380 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:19.380 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.380 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.380 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.381 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.381 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.381 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:19.381 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.381 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.382 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:19.382 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:19.382 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.382 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.382 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.383 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.383 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:19.383 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.383 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.384 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:19.384 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:19.384 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.384 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.384 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.385 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:49:19.385 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:19.385 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.385 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.385 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:19.385 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:19.385 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.385 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.385 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:49:19.386 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:49:19.386 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:19.386 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.386 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.387 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:49:19.387 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:19.387 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:19.387 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.387 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.387 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:49:19.388 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:49:19.389 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.389 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.390 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.391 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.391 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:19.392 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:19.392 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.392 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:19.394 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:49:22.012 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 18:49:22.014 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:49:22.015 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 18:49:22.018 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 18:49:22.019 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:22.019 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:22.019 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.019 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.019 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 18:49:22.021 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 18:49:22.021 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.022 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:22.022 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.022 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.022 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:49:22.023 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:49:22.023 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.023 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.023 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:49:22.024 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.024 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.025 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.025 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:49:22.025 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:49:22.025 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:49:22.025 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:11.728 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 18:52:11.734 +03:00 [Error] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at FoodWaste.Controllers.ProductsController.MergeTwoLists() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 411
   at FoodWaste.Controllers.ProductsController.Create() in C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste\Controllers\ProductsController.cs:line 177
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-05-14 18:52:11.814 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:52:49.631 +03:00 [Debug] Hosting starting
2022-05-14 18:52:50.432 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 18:52:50.433 +03:00 [Information] Hosting environment: "Development"
2022-05-14 18:52:50.434 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 18:52:50.434 +03:00 [Debug] Hosting started
2022-05-14 18:52:50.643 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 18:52:51.256 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 18:52:51.256 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 18:52:51.325 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 18:52:51.325 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 18:52:51.433 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:52:51.455 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 18:52:51.579 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 18:52:51.600 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:51.625 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (22ms).
2022-05-14 18:52:51.628 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:52.018 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:52.024 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 18:52:52.032 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 18:52:52.035 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:52.036 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:52.039 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:52.262 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:52:53.242 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:52:53.264 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:52:53.268 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 18:52:53.330 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 18:52:53.337 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:53.338 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:53.339 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.339 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.341 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.347 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.372 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.395 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:53.395 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.395 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.398 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:53.398 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:53.398 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.398 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.398 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.399 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.400 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:53.400 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.400 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.400 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:53.400 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:53.400 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.400 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.400 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.402 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 18:52:53.402 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:53.402 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.402 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.403 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 18:52:53.407 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 18:52:53.408 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:53.409 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:53.409 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.409 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.409 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:52:53.412 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 18:52:53.412 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:53.412 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.412 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.413 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 18:52:53.434 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 18:52:53.438 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:52:53.439 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:53.439 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:53.439 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.439 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.439 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:52:53.441 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 18:52:53.454 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.492 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.493 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.495 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.496 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:53.497 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:53.497 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.497 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:53.504 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:52:55.072 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 18:52:55.079 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:52:55.081 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 18:52:55.084 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 18:52:55.092 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:55.092 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:55.094 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.095 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.095 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 18:52:55.110 +03:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 18:52:55.112 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.115 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:55.117 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.117 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.118 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 18:52:55.121 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 18:52:55.122 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:55.122 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:55.122 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.122 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.122 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:52:55.123 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 18:52:55.128 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.133 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.134 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.134 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.134 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.134 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:55.134 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:55.134 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.134 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:55.135 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 18:52:55.186 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 18:52:58.234 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 18:52:58.235 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()
    .FirstOrDefault(p => p.AllergenId == __allergenId_0)"'
2022-05-14 18:52:58.239 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT TOP(1) a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a
        WHERE a.AllergenId == @__allergenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 18:52:58.239 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 18:52:58.239 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 18:52:58.239 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:58.239 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:58.239 +03:00 [Debug] Executing DbCommand [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 18:52:58.241 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__allergenId_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a
WHERE a.\"AllergenId\" = @__allergenId_0
LIMIT 1"
2022-05-14 18:52:58.242 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 18:52:58.242 +03:00 [Debug] A data reader was disposed.
2022-05-14 18:52:58.242 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 18:52:58.242 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:44.973 +03:00 [Debug] Hosting starting
2022-05-14 19:00:45.700 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 19:00:45.701 +03:00 [Information] Hosting environment: "Development"
2022-05-14 19:00:45.702 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 19:00:45.702 +03:00 [Debug] Hosting started
2022-05-14 19:00:45.911 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 19:00:46.500 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 19:00:46.501 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 19:00:46.571 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 19:00:46.571 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 19:00:46.682 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:00:46.706 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 19:00:46.820 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 19:00:46.845 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:46.870 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (23ms).
2022-05-14 19:00:46.873 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:47.257 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:47.262 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 19:00:47.269 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 19:00:47.273 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:47.274 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:47.277 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:47.493 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 19:00:49.797 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 19:00:49.822 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:00:49.827 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 19:00:49.887 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 19:00:49.895 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:49.896 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:49.897 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.897 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.898 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.902 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.920 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:49.940 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:49.940 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.940 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.943 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:49.943 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:49.943 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.943 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.943 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.944 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.945 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:49.945 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.945 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.945 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:49.945 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:49.945 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.945 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.945 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.946 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:00:49.947 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:49.947 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.947 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.948 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 19:00:49.952 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 19:00:49.953 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:49.953 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:49.953 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.953 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.953 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 19:00:49.956 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 19:00:49.957 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:49.957 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.957 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.958 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 19:00:49.971 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 19:00:49.975 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 19:00:49.976 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:49.976 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:49.976 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.976 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:49.976 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 19:00:49.978 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 19:00:49.992 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:50.032 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:50.033 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:50.035 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:50.036 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:50.037 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:50.037 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:50.037 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:50.045 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 19:00:52.148 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 19:00:52.156 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:00:52.159 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 19:00:52.163 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 19:00:52.171 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:52.172 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:52.173 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.174 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.175 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 19:00:52.191 +03:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 19:00:52.194 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.197 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:52.200 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.200 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.201 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 19:00:52.205 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 19:00:52.205 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:00:52.205 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:00:52.205 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.205 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.205 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 19:00:52.206 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 19:00:52.211 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.216 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.217 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:00:52.217 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:00:52.217 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.217 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:00:52.218 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 19:00:52.256 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 19:06:56.881 +03:00 [Debug] Hosting starting
2022-05-14 19:06:57.692 +03:00 [Information] Application started. Press Ctrl+C to shut down.
2022-05-14 19:06:57.693 +03:00 [Information] Hosting environment: "Development"
2022-05-14 19:06:57.694 +03:00 [Information] Content root path: "C:\Users\pijus.petkevicius\Source\Repos\FoodWaste\FoodWaste"
2022-05-14 19:06:57.694 +03:00 [Debug] Hosting started
2022-05-14 19:06:57.907 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-05-14 19:06:58.533 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserRole<int>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
2022-05-14 19:06:58.533 +03:00 [Debug] The index "{'UserId'}" was not created on entity type '"IdentityUserToken<int>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
2022-05-14 19:06:58.613 +03:00 [Debug] The property '"ProductId"."Allergen"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 19:06:58.613 +03:00 [Debug] The property '"Discriminator"."IdentityUser<int>"' was created in shadow state because there are no eligible CLR members with a matching name.
2022-05-14 19:06:58.720 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:06:58.744 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Count()"'
2022-05-14 19:06:58.859 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 19:06:58.883 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:06:58.911 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (27ms).
2022-05-14 19:06:58.914 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:06:59.292 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:06:59.297 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 19:06:59.304 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p"
2022-05-14 19:06:59.308 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:06:59.309 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:06:59.311 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:06:59.537 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 19:07:04.978 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 19:07:05.003 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:07:05.009 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__userId_0))"'
2022-05-14 19:07:05.075 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Restaurant>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
        SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
        FROM Restaurant AS r
        WHERE r.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .SingleOrDefault()"'
2022-05-14 19:07:05.083 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:05.084 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:05.085 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.085 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.087 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.092 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.111 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.131 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:05.131 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.131 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.134 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:05.134 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:05.134 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.134 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.134 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.136 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.136 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:05.137 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.137 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.137 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:05.137 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:05.137 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.137 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.137 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.139 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__userId_0
LIMIT 2"
2022-05-14 19:07:05.139 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:05.139 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.139 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.141 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Count()"'
2022-05-14 19:07:05.146 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT CAST(COUNT(*)) AS integer)
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)
    .Single()"'
2022-05-14 19:07:05.147 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:05.147 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:05.147 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.147 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.147 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 19:07:05.150 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__SearchString_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)::INT
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)"
2022-05-14 19:07:05.150 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:05.151 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.151 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.152 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Index (FoodWaste)"
2022-05-14 19:07:05.169 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Product>()
    .Select(p => p)
    .Where(s => s.Name.Contains(__SearchString_0))
    .OrderBy(p => p.Name)
    .Skip(__p_1)
    .Take(__p_2)"'
2022-05-14 19:07:05.174 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Product>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Product.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Product.ExpiryDate (DateTime) Required, 1], [Property: Product.Name (string), 2], [Property: Product.RestaurantId (int) Required FK Index, 3], [Property: Product.State (ProductState) Required, 4], [Property: Product.UserId (Nullable<int>) FK Index, 5], }
        SELECT p.Id, p.ExpiryDate, p.Name, p.RestaurantId, p.State, p.UserId
        FROM Product AS p
        WHERE (@__SearchString_0 == '') || (strpos(p.Name, @__SearchString_0) > 0)
        ORDER BY p.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Product>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 19:07:05.175 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:05.175 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:05.175 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.175 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.175 +03:00 [Debug] Executing DbCommand [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 19:07:05.177 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__SearchString_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT p.\"Id\", p.\"ExpiryDate\", p.\"Name\", p.\"RestaurantId\", p.\"State\", p.\"UserId\"
FROM \"Product\" AS p
WHERE (@__SearchString_0 = '') OR (strpos(p.\"Name\", @__SearchString_0) > 0)
ORDER BY p.\"Name\"
LIMIT @__p_2 OFFSET @__p_1"
2022-05-14 19:07:05.193 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.232 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.233 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.234 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.236 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Product"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:05.237 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:05.237 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.237 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:05.279 +03:00 [Debug] '"ApplicationDbContext"' disposed.
2022-05-14 19:07:06.788 +03:00 [Information] Start: Opening page: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 19:07:06.795 +03:00 [Information] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL"' with options: "None"
2022-05-14 19:07:06.797 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Restaurant>()
    .SingleOrDefault(r => r.UserId.Equals((object)__GetCurrentUserId_0))"'
2022-05-14 19:07:06.801 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Restaurant>(
    asyncEnumerable: new SingleQueryingEnumerable<Restaurant>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Restaurant.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Restaurant.Address (string), 1], [Property: Restaurant.Name (string), 2], [Property: Restaurant.PhoneNumber (string), 3], [Property: Restaurant.UserId (Nullable<int>) FK Index, 4], }
            SELECT TOP(2) r.Id, r.Address, r.Name, r.PhoneNumber, r.UserId
            FROM Restaurant AS r
            WHERE r.UserId == @__GetCurrentUserId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Restaurant>, 
        FoodWaste.Data.ApplicationDbContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)"'
2022-05-14 19:07:06.810 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:06.810 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:06.812 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.813 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.813 +03:00 [Debug] Executing DbCommand [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 19:07:06.823 +03:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__GetCurrentUserId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.\"Id\", r.\"Address\", r.\"Name\", r.\"PhoneNumber\", r.\"UserId\"
FROM \"Restaurant\" AS r
WHERE r.\"UserId\" = @__GetCurrentUserId_0
LIMIT 2"
2022-05-14 19:07:06.826 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Restaurant"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.828 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:06.831 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.831 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.833 +03:00 [Debug] Compiling query expression: "
"'"DbSet<Allergen>()"'
2022-05-14 19:07:06.836 +03:00 [Debug] Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<Allergen>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Allergen.AllergenId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Allergen.Details (string), 1], [Property: Allergen.Name (string), 2], [Property: Allergen.ProductId (no field, Nullable<Guid>) Shadow FK Index, 3], }
        SELECT a.AllergenId, a.Details, a.Name, a.ProductId
        FROM Allergens AS a), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Allergen>, 
    FoodWaste.Data.ApplicationDbContext, 
    False, 
    False
)"'
2022-05-14 19:07:06.837 +03:00 [Debug] Creating DbCommand for '"ExecuteReader"'.
2022-05-14 19:07:06.837 +03:00 [Debug] Created DbCommand for '"ExecuteReader"' (0ms).
2022-05-14 19:07:06.837 +03:00 [Debug] Opening connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.837 +03:00 [Debug] Opened connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.837 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 19:07:06.838 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.\"AllergenId\", a.\"Details\", a.\"Name\", a.\"ProductId\"
FROM \"Allergens\" AS a"
2022-05-14 19:07:06.843 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.848 +03:00 [Debug] Context '"ApplicationDbContext"' started tracking '"Allergen"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-05-14 19:07:06.849 +03:00 [Debug] A data reader was disposed.
2022-05-14 19:07:06.849 +03:00 [Debug] Closing connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.849 +03:00 [Debug] Closed connection to database '"postgres"' on server '"tcp://localhost:5432"'.
2022-05-14 19:07:06.850 +03:00 [Information] Completed: Page opened: "FoodWaste.Controllers.ProductsController.Create (FoodWaste)"
2022-05-14 19:07:06.885 +03:00 [Debug] '"ApplicationDbContext"' disposed.
